<!--BEFORE EDITING -->
{% load static %}
<!-- workouts/templates/workouts/workout_page.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <!-- ... -->
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
</head>
<body>
    <h1>Workout Page</h1>
    <!-- Link to user profile -->
    <a href="{% url 'users-profile' %}">Go back to profile</a>

    <!-- Display existing workouts -->
    <h2>Your Workouts</h2>
    <ul>
        {% for workout in workouts %}
            <li>
                <strong>{{ workout.name }}</strong><br>
                {% if workout.description %}<em>{{ workout.description }}</em><br>{% endif %}
                <strong>Type of Workout:</strong> {{ workout.workout_type }}<br>

                <!-- Display exercises for the workout -->
                {% for set in workout.sets.all %}
                    <strong>Exercise:</strong> {{ set.exercise.name }}<br>
                    <strong>Sets:</strong> {{ set.sets }}<br>
                    <strong>Reps:</strong> {{ set.reps }}<br>
                {% endfor %}

                <a href="{% url 'delete_workout' workout.id %}">Delete</a>
            </li>
        {% endfor %}
    </ul>

    <!-- Add your workout form -->
    <h2>Create a Workout</h2>
    <!-- workouts/templates/workouts/workout_page.html -->
    <!-- ... -->
    <form method="post" action="" autocomplete="off">
        {% csrf_token %}
        {{ form.as_p }}
        {{ form.exercises.management_form }}
        {{ form.exercises.non_form_errors }}
        {% for formset in form.exercises %}
            {{ formset.as_table }}
        {% endfor %}
        <button type="submit">Save Workout</button>
    </form>
    <!-- ... -->

    <script>
        $(function() {
            // Assuming "id_exercise" is the ID of the input field for exercise name
            $("#id_exercise").autocomplete({
                source: "{% url 'exercise_autocomplete' %}",  // Replace with the actual URL for exercise autocomplete
                minLength: 5,  // Adjust as needed
            });
        });
    </script>    

</body>
</html>